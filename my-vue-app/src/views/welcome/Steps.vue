<template>
  <div class="setup-container">
    <!-- æ–°å¢å¯¼èˆªæ  -->
    <div class="setup-navbar">
      <div class="nav-left">
        <img src="../../assets/AutoVsionLOGO@1x.png" class="nav-logo" alt="AutoVision">
        
      </div>
      <div class="nav-right">
       
        <img src="../../assets/touxiang.png" alt="å¤´åƒ">
      </div>
    </div>

 

    <!-- æ–°å¢æ¬¢è¿é¡µé¢ï¼ˆæ­¥éª¤0ï¼‰ -->
    <div v-if="currentStep === 0" class="welcome-card">
         <!-- è¿›åº¦æ¡ -->
      <div class="progress-container">
        <div class="progress-bar" :style="{ width: progressWidth }"></div>
      </div>
      <img src="../../assets/step0.png" alt="æ¬¢è¿å›¾ç‰‡">
      <div class="text">
        <p>æ¬¢è¿æ¥åˆ°AutoVision</p>
        <p>æ¥ä¸‹æ¥æˆ‘å°†ä¼šå¸®åŠ©ä½ å®Œæˆè®¾å¤‡å®‰è£…é…ç½®</p>
        <el-icon :size="30" color="#1B7EF2" class="arrow-button" @click="nextStep">
          <Right />
        </el-icon>
      </div>
    </div>

    <!-- æ­¥éª¤1ï¼šå®‰è£…æ‘„åƒå¤´ -->
    <div v-if="currentStep === 1" class="step-card">
         <!-- è¿›åº¦æ¡ -->
      <div class="progress-container">
        <div class="progress-bar" :style="{ width: progressWidth }"></div>
      </div>
      <h1 class="title">ç¬¬ä¸€æ­¥ï¼šæŒ‰ç…§å›¾ç¤ºå®‰è£…å¥½é…å¥—çš„æ‘„åƒå¤´è‡³ä½ çš„æµæ°´çº¿çš„æ£€æµ‹ç¯èŠ‚</h1>
      <div class="content-1">
        <img src="../../assets/step1.png" alt="å®‰è£…ç¤ºæ„å›¾1">
        <div class="instructions-1">
          <p>å…ˆå°†æ‘„åƒå¤´xxxxxxxxxxxxxxxxxxxxx
            xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          </p>
        </div>
      </div>
      <div class="content-2">
        <img src="../../assets/step1.png" alt="å®‰è£…ç¤ºæ„å›¾2">
        <div class="instructions-2">
          <p>å…ˆå°†æ‘„åƒå¤´xxxxxxxxxxxxxxxxxxxxx
            xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          </p>
        </div>
      </div>
      <div class="content-3">
        <img src="../../assets/step1.png" alt="å®‰è£…ç¤ºæ„å›¾3">
        <div class="instructions-3">
          <p>å…ˆå°†æ‘„åƒå¤´xxxxxxxxxxxxxxxxxxxxx
            xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          </p>
        </div>
      </div>

      <div class="action-buttons">
        <el-icon :size="30" color="#1B7EF2" class="arrow-button" @click="nextStep">
          <Right />
        </el-icon>
        <button @click="showSkipDialog = true">è·³è¿‡</button>

      </div>
    </div>

    <!-- æ­¥éª¤2ï¼šè¿æ¥ä¸»æœº -->
    <div v-if="currentStep === 2" class="step-card">
         <!-- è¿›åº¦æ¡ -->
      <div class="progress-container">
        <div class="progress-bar" :style="{ width: progressWidth }"></div>
      </div>
      <h1 class="title">ç¬¬äºŒæ­¥ï¼šè¿æ¥æ£€æµ‹ä¸»æœº</h1>
      <div class="content">
        <img src="../../assets/step2.png" alt="è¿æ¥ç¤ºæ„å›¾">
        <div class="instructions">
          <p>1. ä½¿ç”¨USB3.0æ•°æ®çº¿è¿æ¥è®¾å¤‡</p>
          <p>2. ç¡®è®¤ä¸»æœºè¯†åˆ«åˆ°æ‘„åƒå¤´</p>
          <p>3. æ£€æŸ¥è®¾å¤‡ç®¡ç†å™¨ä¸­çš„è¿æ¥çŠ¶æ€</p>
        </div>
      </div>
      <div class="action-buttons">
        <button @click="prevStep">ä¸Šä¸€æ­¥</button>
        <button class="primary" @click="nextStep">ä¸‹ä¸€æ­¥</button>
      </div>
    </div>

    <!-- æ­¥éª¤3ï¼šè°ƒè¯•è§’åº¦ -->
    <div v-if="currentStep === 3" class="step-card">
         <!-- è¿›åº¦æ¡ -->
      <div class="progress-container">
        <div class="progress-bar" :style="{ width: progressWidth }"></div>
      </div>
      <h1 class="title">ç¬¬ä¸‰æ­¥ï¼šè°ƒè¯•æ‘„åƒå¤´</h1>
      <div class="instructions">
        <p>å‚è€ƒç¤ºæ„å›¾è°ƒæ•´è§’åº¦ï¼š</p>
        <div class="comparison">
          <img src="../../assets/step3.png" alt="æ ‡å‡†è§’åº¦">
          <img :src="currentCameraView" alt="å½“å‰è§†è§’">
        </div>
      </div>
      <div class="action-buttons">
        <button @click="prevStep">ä¸Šä¸€æ­¥</button>
        <button class="primary" @click="completeSetup">å®Œæˆè°ƒè¯•</button>
      </div>
    </div>


     <!-- å®Œæˆé¡µé¢ -->
    <div v-if="currentStep === 4" class="completion-card">
         <!-- è¿›åº¦æ¡ -->
      <div class="progress-container">
        <div class="progress-bar" :style="{ width: progressWidth }"></div>
      </div>
      <img src="../../assets/step4.png" alt="ç»“æŸå›¾ç‰‡">
      <div class="text-2">
        <h1>ğŸ‰ å®‰è£…å®Œæˆ!</h1>
        <p>ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨AutoVisionè¿›è¡Œæ™ºèƒ½æ£€æµ‹</p>
        <button class="primary" @click="gotoMonitoring">è¿›å…¥æ•°æ®ç›‘æµ‹</button>
      </div>
    </div>

    <!-- è·³è¿‡å®‰è£…å¯¹è¯æ¡† -->
    <div v-if="showSkipDialog" class="dialog-overlay">
      <div class="dialog">
        <p>å®‰è£…åæ‰å¯è¿›è¡Œé›¶ä»¶çš„å®æ—¶ç›‘æµ‹ï¼Œ</p>
        <p>æ‚¨ç¡®å®šè·³è¿‡æ‘„åƒå¤´å®‰è£…æ•™å­¦å—ï¼Ÿ</p>
        <p>å¯åœ¨â€œç³»ç»Ÿè®¾ç½®â€ä¸­å­¦ä¹ æ‘„åƒå¤´å®‰è£…æµç¨‹ã€‚</p>
        <div class="dialog-buttons">
          <button class="warning" @click="skipInstallation">ç¡®è®¤</button>
          <button class="yes" @click="showSkipDialog = false">å–æ¶ˆ</button>

        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { ArrowRight } from '@element-plus/icons-vue'
import { Right } from '@element-plus/icons-vue'


export default {
  components: { ArrowRight },
  data() {
    return {
      currentStep: 0,
      showSkipDialog: false,
      currentCameraView: import('../../assets/current-view.png'),
      totalSteps: 4 // æ€»æ­¥éª¤æ•°
    }
  },
  computed: {
    // è®¡ç®—è¿›åº¦æ¡å®½åº¦
    progressWidth() {
      return `${((this.currentStep + 1) / this.totalSteps) * 100}%`
    }
  },
  methods: {
    nextStep() {
      if (this.currentStep < 4) this.currentStep++
    },
    prevStep() {
      if (this.currentStep > 1) this.currentStep--
    },
    skipInstallation() {
      this.showSkipDialog = false
      this.currentStep = 4
    },
    completeSetup() {
      this.currentStep = 4
    },
    gotoMonitoring() {
      this.$router.push('/monitoring')
    },

    mounted() {
  console.log('å½“å‰è·¯ç”±ä¿¡æ¯:', {
    path: this.$route.path,
    matched: this.$route.matched.map(r => r.path)
  })
}
  }
}
</script>

<style scoped>
.setup-container {
 /* å‚ç›´æ°´å¹³å±…ä¸­å¿…å¤‡ */
    display: flex;          /* è§¦å‘å¼¹æ€§å¸ƒå±€ */
    justify-content: center; /* ä¸»è½´å¯¹é½ */
    align-items: center;    /* äº¤å‰è½´å¯¹é½ */
    min-height: 100vh;      /* ä¿è¯å®¹å™¨æ’‘æ»¡å±å¹• */
    position: relative;
    width: 1920px;
    height: 146.12px;
    opacity: 1;
        
    background:#0A0721;

	

	
}

/* æ–°å¢å¯¼èˆªæ æ ·å¼ */
.setup-navbar {
 position: absolute;
left: 0px;
top: 0px;
width: 1920px;
height: 146.12px;
opacity: 1;
}

.nav-left {



  position: absolute;
left: 58px;
top: 23px;
width: 271px;
height: 83px;
opacity: 1;
}

.nav-right{
position: absolute;
left: 1804px;
top: 35px;
width: 71px;
height: 71px;
border-radius: 100px;
opacity: 1;
}

/* è¿›åº¦æ¡æ ·å¼ */
.progress-container {
position: absolute;
left: 81px;
top: 54px;
width: 854px;
height: 8px;
border-radius: 8px;
opacity: 1;
	
background: rgba(112, 112, 112, 0.2314);
	
}

.progress-bar {
  height: 100%;
  background: #1B7EF2;
  transition: width 0.3s ease;
}


/* æ–°å¢æ¬¢è¿é¡µé¢æ ·å¼ */
.welcome-card {
  background: white;
position: absolute;
left: 452px;
top: 202px;
width: 1016px;
height: 687px;
border-radius: 15px;
opacity: 1;
	
background: #FFFFFF;
	
box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.3);
	
}
.welcome-card img{
  position: absolute;
left: 376px;
top: 181px;
width: 275px;
height: 236px;
opacity: 1;
	
}

.text  {
position: absolute;
left: 183px;
top: 460px;
width: 660px;
height: 117px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 33px;
font-weight: normal;
line-height: normal;
text-align: center;
letter-spacing: 0em;
	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #000000;
line-height: 15px;
	
}
/* ç®­å¤´æŒ‰é’®æ ·å¼ */
 .text .arrow-button {
  position: absolute;
  left: 618px;
top: 72px;
  cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹å‹ */
  transition: opacity 0.3s ease; /* æ·»åŠ æ‚¬åœæ•ˆæœ */
  margin-top: 2px; /* ä¸æ–‡å­—é—´è· */
}

.arrow-button:hover {
  opacity: 0.8; /* æ‚¬åœæ—¶è½»å¾®é€æ˜ */
}

.welcome-card button {
  margin-top: 2rem;
  padding: 1rem 3rem;
}

.step-card {
position: absolute;
left: 452px;
top: 197px;
width: 1016px;
height: 687px;
border-radius: 15px;
opacity: 1;
	
background: #FFFFFF;
	
box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.3);
	
}

.title {
position: absolute;
left: 52px;
top: 115px;
width: 912px;
height: 52px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 28px;
font-weight: normal;
line-height: normal;
text-align: center;
letter-spacing: 0em;
	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #000000;
	
}
.content-1 img{
  position: absolute;
left: 37px;
top: 220px;
width: 297px;
height: 219px;
opacity: 1;
}

.instructions-1 p {
position: absolute;
left: 41px;
top: 473px;
width: 293px;
height: 106px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 20px;

	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #000000;
	
}

.content-2 img{
  position: absolute;
left: 360px;
top: 220px;
width: 297px;
height: 219px;
opacity: 1;

}

.instructions-2 p{
  position: absolute;
left: 360px;
top: 474px;
width: 293px;
height: 106px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 20px;

	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #000000;
	
}
.content-3 img{
  position: absolute;
left: 683px;
top: 220px;
width: 297px;
height: 219px;
opacity: 1;
}
.instructions-3 p{
  
position: absolute;
left: 683px;
top: 475px;
width: 293px;
height: 106px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 20px;

	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #000000;
	
}
.action-buttons {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
}

button {

position: absolute;
left: 932px;
top: 630px;
width: 75px;
height: 42px;
opacity: 1;

font-family: Source Han Sans;
font-size: 18px;
font-weight: normal;
line-height: 43.2px;
text-align: center;
letter-spacing: 0px;

font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #979797;
}
/* ç®­å¤´æŒ‰é’®æ ·å¼ */
 .action-buttons .arrow-button {
  position: absolute;
  left: 890px;
top: 637px;
  cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹å‹ */
  transition: opacity 0.3s ease; /* æ·»åŠ æ‚¬åœæ•ˆæœ */
  margin-top: 2px; /* ä¸æ–‡å­—é—´è· */
}

.primary {
  background: #1B7EF2;
  color: white;
}

/* æ–°å¢ç»“æŸé¡µé¢æ ·å¼ */
.completion-card {
  background: white;
position: absolute;
left: 452px;
top: 202px;
width: 1016px;
height: 687px;
border-radius: 15px;
opacity: 1;
	
background: #FFFFFF;
	
box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.3);
	
}


.warning {
  background: #ff4757;
  color: white;
}

.comparison {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2rem;
  margin: 2rem 0;
}

.dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
}

.dialog {
position: absolute;
left:581px;
top: 380px;
width: 759px;
height: 301px;
border-radius: 15px;
opacity: 1;

background: #FFFFFF;
}
.dialog p{
  position: relative;
left: 141px;
top: 30px;
width: 478px;
height: 25px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 24px;
font-weight: bold;
line-height: 50px;
text-align: center;
letter-spacing: 0px;

	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #3D3D3D;

	
}
.yes{
position: absolute;
left: 554px;
top: 239px;
width: 85px;
height: 44px;
opacity: 1;
	
font-family: Source Han Sans;
font-size: 18px;
font-weight: 500;
line-height: 50px;
text-align: center;
letter-spacing: 0px;
	
font-variation-settings: "opsz" auto;
font-feature-settings: "kern" on;
color: #979797;
	
}
.warning{
  position: absolute;
left: 639px;
top: 242px;
width: 89px;
height: 41px;
border-radius: 8px;
opacity: 1;
	
background: #1B7EF2;
	
}
/* å¡ç‰‡åŠ¨æ•ˆ */
.step-card {
  transition: transform 0.3s ease;
}
.step-card:hover {
  transform: translateY(-5px);
}

</style>